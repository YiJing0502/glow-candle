import{j as k,k as h,_ as v,o as r,c as _,b as t,d as o,w as c,e as i,F as M,g as n,E as R,G as V,m as T,a as g,h as b}from"./index-nBPxgtNM.js";import{t as x}from"./toastsStore-e8baNn0w.js";import{_ as B}from"./glow-logo-2T0RrnYc.js";import{T as I}from"./ToastMessages-SIelg5LR.js";var L={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:w}=L,f=k("adminStore",{state:()=>({loginSuccess:null}),getters:{},actions:{initializeAdmin(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)adminAccount\s*\=\s*([^;]*).*$)|^.*$/,"$1");h.defaults.headers.common.Authorization=s},postApiUserCheck(){const s=`${w}/v2/api/user/check`;return h.post(s).then(e=>(this.loginSuccess=e.data.success,e)).catch(e=>{throw this.loginSuccess=e.response.data.success,e})}}});var y={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:U}=y,C={data(){return{serverMessage:{message:"",success:!0}}},methods:{adminLogout(){const s=`${U}/v2/logout`;this.$http.post(s).then(e=>{this.$router.push({name:"login"}),this.serverMessage.message=e.data.message,this.serverMessage.success=e.data.success,this.$refs.resultModal.openModal()}).catch(e=>{this.serverMessage.message=e.response.data.message,this.serverMessage.success=e.response.data.success,this.$refs.resultModal.openModal()})}}},p=s=>(R("data-v-4e4eb3e0"),s=s(),V(),s),P={class:"col-2 bg-main-medium side-bar-height px-3"},D={class:"d-flex justify-content-center my-3"},N=p(()=>t("img",{src:B,alt:"",width:"70"},null,-1)),F={class:"list-group"},O={class:"list-group-item"},j={class:"list-group-item"},z={class:"list-group-item"},H={class:"list-group-item"},G={class:"m-3 d-flex justify-content-center align-items-center"},q=p(()=>t("span",{class:"material-icons"},"logout",-1)),J=p(()=>t("span",null,"登出",-1)),K=[q,J];function Q(s,e,S,A,l,u){const a=n("router-link"),d=n("ResultModal");return r(),_(M,null,[t("div",P,[t("div",D,[o(a,{to:{name:"front"}},{default:c(()=>[N]),_:1})]),t("ul",F,[t("li",O,[o(a,{class:"list-group-item",to:{name:"adminOrders"}},{default:c(()=>[i("訂單管理")]),_:1})]),t("li",j,[o(a,{class:"list-group-item",to:{name:"adminProducts"}},{default:c(()=>[i("產品管理")]),_:1})]),t("li",z,[o(a,{class:"list-group-item",to:{name:"adminCoupons"}},{default:c(()=>[i("優惠券管理")]),_:1})]),t("li",H,[o(a,{class:"list-group-item",to:{name:"adminArticles"}},{default:c(()=>[i("文章管理")]),_:1})])]),t("div",G,[t("button",{type:"button",class:"btn btn-outline-spec d-flex justify-content-center align-items-center",onClick:e[0]||(e[0]=(...m)=>u.adminLogout&&u.adminLogout(...m))},K)])]),o(d,{ref:"resultModal","server-message":l.serverMessage},null,8,["server-message"])],64)}const W=v(C,[["render",Q],["__scopeId","data-v-4e4eb3e0"]]),X={data(){return{serverMessage:{message:"",success:!0}}},components:{AdminNavbar:W,ToastMessages:I},computed:{...T(f,["loginSuccess"])},methods:{...g(x,["pushToast"]),...g(f,["initializeAdmin","postApiUserCheck"])},mounted(){this.initializeAdmin(),this.postApiUserCheck().then(()=>{this.loginSuccess&&this.pushToast({title:"登入成功",style:"bg-deep-gray"})}).catch(s=>{this.loginSuccess||(this.$router.push({name:"login"}),this.serverMessage.message=s.response.data.message,this.serverMessage.success=s.response.data.success,this.$refs.resultModal.openModal())})}},Y={key:1,class:"d-flex"};function Z(s,e,S,A,l,u){const a=n("VueLoading"),d=n("ToastMessages"),m=n("AdminNavbar"),E=n("RouterView"),$=n("ResultModal");return r(),_(M,null,[s.loginSuccess?(r(),_("div",Y,[o(d),o(m),o(E)])):(r(),b(a,{key:0,active:!s.loginSuccess,"background-color":"#FBFAF4",color:"#52504B"},null,8,["active"])),o($,{ref:"resultModal","server-message":l.serverMessage},null,8,["server-message"])],64)}const as=v(X,[["render",Z]]);export{as as default};
