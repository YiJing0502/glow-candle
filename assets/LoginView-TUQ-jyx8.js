import{_ as m,c as u,b as s,u as p,l,v as d,d as _,F as f,r as h,o as g}from"./index-5K09qu-D.js";import{_ as v}from"./glow-logo-2T0RrnYc.js";var b={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:w}=b,x={data(){return{email:"",password:"",serverMessage:{message:"",success:!0}}},methods:{postAdminSignin(){if(this.email===""&&this.password===""){this.serverMessage.message="信箱與密碼是必須的",this.serverMessage.success=!1,this.$refs.resultModal.openModal();return}const r={username:this.email,password:this.password};this.$http.post(`${w}/v2/admin/signin`,r).then(e=>{if(e.data.success){const{expired:a,token:i}=e.data;document.cookie=`adminAccount=${i}; expires=${new Date(a)}`,this.email="",this.password="",this.$router.push({name:"back"})}}).catch(e=>{this.serverMessage.message=e.response.data.message,this.serverMessage.success=e.response.data.success,this.$refs.resultModal.openModal()})}},mounted(){}},M={class:"container d-flex justify-content-center align-items-center vh-100 back"},y={class:"col-8"},T=s("div",{class:"d-flex justify-content-center mb-2"},[s("img",{src:v,alt:"",class:"img-fluid",width:"100"})],-1),A=s("h3",{class:"mb-3 text-center myTextColor"},"請先登入",-1),E={class:"form-floating mb-3"},R=s("label",{for:"username",class:"myTextColor"}," 輸入您的電子郵件 ",-1),S={class:"form-floating mb-3"},V=s("label",{for:"password",class:"myTextColor"}," 輸入您的密碼 ",-1),B=s("div",{class:"d-flex"},[s("button",{type:"button",class:"btn btn-lg btn-solid-dpgray w-100 mt-3 resetBorderRadius"}," 回首頁 "),s("button",{class:"btn btn-lg w-100 mt-3 resetBorderRadius btn-solid-spec",type:"submit"}," 登入 ")],-1);function k(r,e,a,i,t,n){const c=h("ResultModal");return g(),u(f,null,[s("div",M,[s("div",y,[T,A,s("form",{id:"form",class:"form-signin",onSubmit:e[2]||(e[2]=p((...o)=>n.postAdminSignin&&n.postAdminSignin(...o),["prevent"]))},[s("div",E,[l(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.email=o),type:"email",class:"form-control myTextColor",id:"username",placeholder:"name@example.com",required:"",autofocus:""},null,512),[[d,t.email]]),R]),s("div",S,[l(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.password=o),type:"password",class:"form-control myTextColor",id:"password",placeholder:"password",required:""},null,512),[[d,t.password]]),V]),B],32)])]),_(c,{ref:"resultModal","server-message":t.serverMessage},null,8,["server-message"])],64)}const U=m(x,[["render",k]]);export{U as default};
