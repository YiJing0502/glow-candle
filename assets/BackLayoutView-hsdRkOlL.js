import{K as E,L as h,m as S,a as d,_ as v,j as w,o as p,c as A,b as t,f as n,g as i,n as c,e as r,i as u,p as L,k as C,l as R,s as V,J as I}from"./index-vqMCxPcU.js";import{p as _}from"./pageStore-WDAUXcEC.js";var N={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:T}=N,f=E("adminStore",{state:()=>({loginSuccess:null}),getters:{},actions:{initializeAdmin(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)adminAccount\s*\=\s*([^;]*).*$)|^.*$/,"$1");h.defaults.headers.common.Authorization=e},postApiUserCheck(){const e=`${T}/v2/api/user/check`;return h.post(e).then(s=>(this.loginSuccess=s.data.success,s)).catch(s=>{throw this.loginSuccess=s.response.data.success,s})}}});var B={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:b}=B,U={data(){return{}},computed:{...S(_,["nowPage"])},methods:{adminLogout(){const e=`${b}/v2/logout`;this.$http.post(e).then(s=>{const l=new Date;l.setSeconds(l.getSeconds()-1),document.cookie=`adminAccount=; expires=${l.toUTCString()}`,this.$router.push({name:"login"}),this.showAlertMessage(!0,s.data.message)}).catch(s=>{this.showAlertMessage(!1,s.response.data.message)})},...d(_,["changeNowPage"]),...d(w,["showAlertMessage"])}},g=e=>(L("data-v-3cf53ff8"),e=e(),C(),e),y={class:"col-2 bg-main-medium side-bar-height px-3"},D={class:"d-flex justify-content-center my-3"},M=g(()=>t("img",{src:R,alt:"",width:"70"},null,-1)),z={class:"list-group"},O={class:"list-group-item"},j={class:"list-group-item"},x={class:"list-group-item"},H={class:"list-group-item"},J={class:"list-group-item"},K={class:"m-3 d-flex justify-content-center align-items-center"},q=g(()=>t("span",{class:"material-icons"},"logout",-1)),F=g(()=>t("span",null,"登出",-1)),G=[q,F];function Q(e,s,l,$,k,m){const a=u("RouterLink");return p(),A("div",y,[t("div",D,[n(a,{class:c({active:e.nowPage==="首頁"}),onClick:s[0]||(s[0]=o=>e.changeNowPage("首頁")),to:{name:"home"}},{default:i(()=>[M]),_:1},8,["class"])]),t("ul",z,[t("li",O,[n(a,{class:c(["list-group-item",{active:e.nowPage==="後台管理"}]),onClick:s[1]||(s[1]=o=>e.changeNowPage("後台管理")),to:{name:"admin"}},{default:i(()=>[r("後台管理")]),_:1},8,["class"])]),t("li",j,[n(a,{class:c(["list-group-item",{active:e.nowPage==="訂單管理"}]),onClick:s[2]||(s[2]=o=>e.changeNowPage("訂單管理")),to:{name:"adminOrders"}},{default:i(()=>[r("訂單管理")]),_:1},8,["class"])]),t("li",x,[n(a,{class:c(["list-group-item",{active:e.nowPage==="產品管理"}]),onClick:s[3]||(s[3]=o=>e.changeNowPage("產品管理")),to:{name:"adminProducts"}},{default:i(()=>[r("產品管理")]),_:1},8,["class"])]),t("li",H,[n(a,{class:c(["list-group-item",{active:e.nowPage==="優惠券管理"}]),onClick:s[4]||(s[4]=o=>e.changeNowPage("優惠券管理")),to:{name:"adminCoupons"}},{default:i(()=>[r("優惠券管理")]),_:1},8,["class"])]),t("li",J,[n(a,{class:c(["list-group-item",{active:e.nowPage==="文章管理"}]),onClick:s[5]||(s[5]=o=>e.changeNowPage("文章管理")),to:{name:"adminArticles"}},{default:i(()=>[r("文章管理")]),_:1},8,["class"])])]),t("div",K,[t("button",{type:"button",class:"btn btn-outline-spec d-flex justify-content-center align-items-center",onClick:s[6]||(s[6]=(...o)=>m.adminLogout&&m.adminLogout(...o))},G)])])}const W=v(U,[["render",Q],["__scopeId","data-v-3cf53ff8"]]),X={data(){return{}},components:{AdminNavbar:W},computed:{...S(f,["loginSuccess"])},methods:{...d(I,["pushToast"]),...d(f,["initializeAdmin","postApiUserCheck"]),...d(w,["showAlertMessage"])},mounted(){this.initializeAdmin(),this.postApiUserCheck().then(()=>{this.loginSuccess&&this.pushToast({title:"登入成功",style:"bg-deep-gray"})}).catch(e=>{this.loginSuccess||(this.$router.push({name:"login"}),this.showAlertMessage(!1,e.response.data.message))})}},Y={key:1,class:"d-flex"};function Z(e,s,l,$,k,m){const a=u("PageLoading"),o=u("AdminNavbar"),P=u("RouterView");return e.loginSuccess?(p(),A("div",Y,[n(o),n(P)])):(p(),V(a,{key:0}))}const te=v(X,[["render",Z]]);export{te as default};
