import{j as f,k as n}from"./index-nBPxgtNM.js";var D={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:g,VITE_API_PATH:u}=D,m=f("productsStore",{state:()=>({productsData:[],isLoading:!1,productPagesData:{},productsCategory:[]}),getters:{},actions:{getProductsAll(){this.isLoading=!0;const s=`${g}/v2/api/${u}/products/all`;return new Promise((e,o)=>{n.get(s).then(t=>{this.productsData=t.data.products,this.pagination(1),this.getCategory(),e(t),this.isLoading=!1}).catch(t=>{o(t)})})},getProducts(s,e){this.isLoading=!0;const o=`${g}/v2/api/${u}/products`;return new Promise((t,r)=>{n.get(o,{params:{category:s,page:e}}).then(a=>{t(a)}).catch(a=>{r(a)})})},pagination(s){const e=this.productsData,o=Object.keys(e).length,t=8,r=Math.ceil(o/t);let a=s;a>r&&(a=r);const d=a*t-t+1,p=a*t,c=[];Object.keys(e).forEach((P,l)=>{const i=l+1;i>=d&&i<=p&&c.push(e[P])});const h={totalPage:r,currentPage:a,hasPrevPage:a>1,hasNextPage:a<r};this.productPagesData={products:c,pagination:h}},getCategory(){const s=new Set;Object.keys(this.productsData).forEach(e=>{const{category:o}=this.productsData[e];s.add(o)}),this.productsCategory=Array.from(s)}}});export{m as p};
