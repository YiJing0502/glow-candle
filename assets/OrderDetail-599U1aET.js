import{_,a as b,m,h as f,c as n,b as s,F as d,r as c,t as o,e as l,f as r,g,o as a}from"./index-cg-IyFeF.js";import{o as u}from"./ordersStore-USKflAvw.js";import"./stringStore-cKwn_N3l.js";import"./timeStore-ujaSQsVK.js";const v={data(){return{useCoupon:!1,couponCode:"",checkOrderInfo:!1,orderData:{data:{user:{name:null,email:null,tel:null,address:null},message:null}}}},methods:{async goToGetOrder(){try{const t=await this.getOrder(this.$route.params.id);t.data.order===null&&this.$router.push({name:"front404",params:{pathMatch:this.$route.path.split("/").slice(1)},query:this.$route.query,hash:this.$route.hash}),t.data.order.is_paid||(this.serverMessage.message="訂單已建立，請點擊付款按鈕付款",this.serverMessage.success=t.data.success,this.$refs.resultModal.openModal())}catch(t){this.serverMessage.message=t.response.data.message,this.serverMessage.success=t.response.data.success,this.$refs.resultModal.openModal()}},...b(u,["getOrder","postPayOrder"])},computed:{...m(u,["isLoading","showData","userData","productData","couponData"])},mounted(){this.goToGetOrder()}},y={key:1,class:"container bg-main-medium container-rounded my-5 py-7r px-lg-5 px-md-4 px-sm-3"},w=s("div",{class:"d-flex align-items-center justify-content-center mb-3"},[s("h2",{class:"text-center border-secondary pb-2 fw-bold"},"訂單詳情")],-1),D={class:"row row-cols-1 row-cols-lg-2"},S={class:"col"},$={class:"accordion",id:"accordionPanelsStayOpenExample"},C={class:"accordion-item"},O=s("h2",{class:"accordion-header",id:"ShoppingCartSection"},[s("button",{class:"accordion-button fs-5 fw-semibold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#ShoppingCartDetails","aria-expanded":"true","aria-controls":"ShoppingCartDetails"}," 購物車 ")],-1),k={id:"ShoppingCartDetails",class:"accordion-collapse collapse show","aria-labelledby":"ShoppingCartSection"},I={class:"accordion-body"},M={class:"col col-sm-2 col-lg-3 d-flex align-items-center"},x=["src","alt"],j={class:"col col-sm-10 col-lg-9"},N={class:"d-flex"},T={key:0},B={class:"fw-bold"},E={class:"accordion-item"},L=s("h2",{class:"accordion-header",id:"OrderConfirmationSection"},[s("button",{class:"accordion-button fs-5 fw-semibold collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#OrderConfirmationDetails","aria-expanded":"false","aria-controls":"OrderConfirmationDetails"}," 訂單確認 ")],-1),R={id:"OrderConfirmationDetails",class:"accordion-collapse collapse show","aria-labelledby":"OrderConfirmationSection"},V={class:"accordion-body"},P={class:"d-flex justify-content-between"},q=s("p",null,"訂單編號",-1),A={class:"d-flex justify-content-between"},F=s("p",null,"訂單建立日",-1),G={class:"d-flex justify-content-between"},U=s("p",null,"訂單付款日期",-1),z=s("div",{class:"d-flex justify-content-between"},[s("p",null,"運費"),s("p",null,"免運費")],-1),H={key:0,class:"d-flex justify-content-between"},J=s("p",null,"使用優惠券",-1),K={class:"fw-bold"},Q=s("hr",null,null,-1),W={class:"d-flex justify-content-between mb-3"},X=s("p",null,"總付款金額",-1),Y={class:"text-end"},Z={key:1,class:"d-flex mb-3"},ss={key:2,class:"d-flex mb-3"},ts=s("button",{type:"button",class:"btn btn-solid-dpgray w-100 btn-lg",disabled:""}," 已完成付款 ",-1),os=[ts],es={class:"col"},as={class:"accordion",id:"accordionPanelsStayOpenExample"},ns={class:"accordion-item"},ls=s("h2",{class:"accordion-header",id:"RecipientInformationSection"},[s("button",{class:"accordion-button fs-5 fw-semibold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#RecipientInformationDetails","aria-expanded":"true","aria-controls":"RecipientInformationDetails"}," 收件資料 ")],-1),is={id:"RecipientInformationDetails",class:"accordion-collapse collapse show","aria-labelledby":"RecipientInformationSection"},ds={class:"accordion-body"},cs=s("p",null,"收件人名稱",-1),rs=s("hr",null,null,-1),us=s("p",null,"電子信箱",-1),ps=s("hr",null,null,-1),hs=s("p",null,"行動電話號碼",-1),_s=s("hr",null,null,-1),bs=s("p",null,"收件地址",-1),ms=s("hr",null,null,-1),fs={class:"mb-3"},gs=s("p",null,"訂單備註",-1),vs=s("br",null,null,-1);function ys(t,i,ws,Ds,Ss,$s){const p=g("VueLoading");return t.isLoading?(a(),f(p,{key:0,active:t.isLoading,"background-color":"#EBEAE4","is-full-page":!0,color:"#52504B"},null,8,["active"])):(a(),n("div",y,[w,s("div",D,[s("div",S,[s("div",$,[s("div",C,[O,s("div",k,[s("div",I,[(a(!0),n(d,null,c(t.productData,e=>(a(),n("div",{class:"row mb-3",key:e.id},[s("div",M,[s("img",{src:e.product.imageUrl,alt:e.product.title,class:"img-fluid"},null,8,x)]),s("div",j,[s("div",N,[s("h6",null,o(e.product.title),1)]),s("p",null,[l(" 單價NT$ "+o(parseInt(e.product.price))+" / 小計NT$ "+o(parseInt(e.total))+" ",1),e.final_total!==e.total?(a(),n("span",T," / 優惠價NT$ "+o(parseInt(e.final_total)),1)):r("",!0)]),s("p",null,[l(" 數量： "),s("span",B,o(e.qty),1)])])]))),128))])])]),s("div",E,[L,s("div",R,[s("div",V,[s("div",P,[q,s("p",null,o(t.showData.id),1)]),s("div",A,[F,s("p",null,o(t.showData.create_at),1)]),s("div",G,[U,s("p",null,o(t.showData.paid_date),1)]),z,t.couponData?(a(),n("div",H,[J,s("p",null,[l(" 已使用 "),s("span",K,o(t.couponData.title),1),l(" 優惠券 ")])])):r("",!0),Q,s("div",W,[X,s("h4",Y,"NT$ "+o(parseInt(t.showData.total)),1)]),t.showData.is_paid?(a(),n("div",ss,os)):(a(),n("div",Z,[s("button",{type:"button",class:"btn btn-solid-spec w-100 btn-lg",onClick:i[0]||(i[0]=e=>t.postPayOrder(t.showData.id))}," 點我付款 ")]))])])])])]),s("div",es,[s("div",as,[s("div",ns,[ls,s("div",is,[s("div",ds,[s("div",null,[cs,s("p",null,o(t.userData.name),1)]),rs,s("div",null,[us,s("p",null,o(t.userData.email),1)]),ps,s("div",null,[hs,s("p",null,o(t.userData.tel),1)]),_s,s("div",null,[bs,s("p",null,o(t.userData.address),1)]),ms,s("div",fs,[gs,s("p",null,[(a(!0),n(d,null,c(t.showData.message,(e,h)=>(a(),n("span",{key:h},[l(o(e),1),vs]))),128))])])])])])])])])]))}const Ms=_(v,[["render",ys]]);export{Ms as default};
