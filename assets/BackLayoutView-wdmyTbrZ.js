import{K as E,L as h,m as S,a as r,_ as A,j as v,o as p,c as w,b as t,f as n,g as c,n as l,e as d,i as u,p as L,k as R,l as V,s as C,J as b}from"./index-Ay6J1GsN.js";import{p as _}from"./pageStore-IIw7s-IT.js";var I={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:T}=I,f=E("adminStore",{state:()=>({loginSuccess:null}),getters:{},actions:{initializeAdmin(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)adminAccount\s*\=\s*([^;]*).*$)|^.*$/,"$1");h.defaults.headers.common.Authorization=e},postApiUserCheck(){const e=`${T}/v2/api/user/check`;return h.post(e).then(s=>(this.loginSuccess=s.data.success,s)).catch(s=>{throw this.loginSuccess=s.response.data.success,s})}}});var B={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:N}=B,U={data(){return{}},computed:{...S(_,["nowPage"])},methods:{adminLogout(){const e=`${N}/v2/logout`;this.$http.post(e).then(s=>{const i=new Date;i.setSeconds(i.getSeconds()-1),document.cookie=`adminAccount=; expires=${i.toUTCString()}`,this.$router.push({name:"login"}),this.showAlertMessage(!0,s.data.message)}).catch(s=>{this.showAlertMessage(!1,s.response.data.message)})},...r(_,["changeNowPage"]),...r(v,["showAlertMessage"])}},g=e=>(L("data-v-08d1cfb3"),e=e(),R(),e),y={class:"col-2 bg-main-medium side-bar-height px-3"},D={class:"d-flex justify-content-center my-3"},M=g(()=>t("img",{src:V,alt:"",width:"70"},null,-1)),x={class:"list-group"},z={class:"list-group-item"},O={class:"list-group-item"},j={class:"list-group-item"},H={class:"list-group-item"},J={class:"m-3 d-flex justify-content-center align-items-center"},K=g(()=>t("span",{class:"material-icons"},"logout",-1)),q=g(()=>t("span",null,"登出",-1)),F=[K,q];function G(e,s,i,$,k,m){const a=u("RouterLink");return p(),w("div",y,[t("div",D,[n(a,{class:l({active:e.nowPage==="首頁"}),onClick:s[0]||(s[0]=o=>e.changeNowPage("首頁")),to:{name:"home"}},{default:c(()=>[M]),_:1},8,["class"])]),t("ul",x,[t("li",z,[n(a,{class:l(["list-group-item",{active:e.nowPage==="訂單管理"}]),onClick:s[1]||(s[1]=o=>e.changeNowPage("訂單管理")),to:{name:"adminOrders"}},{default:c(()=>[d("訂單管理")]),_:1},8,["class"])]),t("li",O,[n(a,{class:l(["list-group-item",{active:e.nowPage==="產品管理"}]),onClick:s[2]||(s[2]=o=>e.changeNowPage("產品管理")),to:{name:"adminProducts"}},{default:c(()=>[d("產品管理")]),_:1},8,["class"])]),t("li",j,[n(a,{class:l(["list-group-item",{active:e.nowPage==="優惠券管理"}]),onClick:s[3]||(s[3]=o=>e.changeNowPage("優惠券管理")),to:{name:"adminCoupons"}},{default:c(()=>[d("優惠券管理")]),_:1},8,["class"])]),t("li",H,[n(a,{class:l(["list-group-item",{active:e.nowPage==="文章管理"}]),onClick:s[4]||(s[4]=o=>e.changeNowPage("文章管理")),to:{name:"adminArticles"}},{default:c(()=>[d("文章管理")]),_:1},8,["class"])])]),t("div",J,[t("button",{type:"button",class:"btn btn-outline-spec d-flex justify-content-center align-items-center",onClick:s[5]||(s[5]=(...o)=>m.adminLogout&&m.adminLogout(...o))},F)])])}const Q=A(U,[["render",G],["__scopeId","data-v-08d1cfb3"]]),W={data(){return{}},components:{AdminNavbar:Q},computed:{...S(f,["loginSuccess"])},methods:{...r(b,["pushToast"]),...r(f,["initializeAdmin","postApiUserCheck"]),...r(v,["showAlertMessage"])},mounted(){this.initializeAdmin(),this.postApiUserCheck().then(()=>{this.loginSuccess&&this.pushToast({title:"登入成功",style:"bg-deep-gray"})}).catch(e=>{this.loginSuccess||(this.$router.push({name:"login"}),this.showAlertMessage(!1,e.response.data.message))})}},X={key:1,class:"d-flex"};function Y(e,s,i,$,k,m){const a=u("PageLoading"),o=u("AdminNavbar"),P=u("RouterView");return e.loginSuccess?(p(),w("div",X,[n(o),n(P)])):(p(),C(a,{key:0}))}const se=A(W,[["render",Y]]);export{se as default};
