import{h as d,i as r}from"./index-FQB6OFt_.js";var u={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:n,VITE_API_PATH:c}=u,m=d("cartsStore",{state:()=>({cartsData:[],allCartsData:[],isLoading:!1,isSmLoading:""}),getters:{cartProductQuantity:({cartsData:t})=>{let a=0;return t.length!==0&&t.forEach(i=>{a+=i.qty}),a>9&&(a="9+"),a}},actions:{getCart(t=!0){return new Promise((a,i)=>{t&&(this.isLoading=!0);const e=`${n}/v2/api/${c}/cart`;r.get(e).then(s=>{this.cartsData=[...s.data.data.carts],this.allCartsData={...s.data.data},this.allCartsData.total!==this.allCartsData.final_total?this.allCartsData.useCoupon=!0:this.allCartsData.useCoupon=!1,t&&(this.isLoading=!1),a(s)}).catch(s=>{t&&(this.isLoading=!1),i(s)})})},postCart(t,a){return new Promise((i,e)=>{this.isSmLoading=t;const s=`${n}/v2/api/${c}/cart`,o={data:{product_id:t,qty:a}};r.post(s,o).then(l=>{i(l),this.isSmLoading=""}).catch(l=>{e(l),this.isSmLoading=""})})},putCart(t,a,i){return new Promise((e,s)=>{this.isSmLoading=a;const o=`${n}/v2/api/${c}/cart/${t}`,l={data:{product_id:a,qty:i}};r.put(o,l).then(h=>{e(h),this.isSmLoading=""}).catch(h=>{s(h),this.isSmLoading=""})})},deleteCart(t){return new Promise((a,i)=>{this.isSmLoading=t;const e=`${n}/v2/api/${c}/cart/${t}`;r.delete(e).then(s=>{a(s),this.isSmLoading=""}).catch(s=>{i(s),this.isSmLoading=""})})},deleteCarts(){return new Promise((t,a)=>{const i=`${n}/v2/api/${c}/carts`;r.delete(i).then(e=>{t(e)}).catch(e=>{a(e)})})},postCoupon(t){return new Promise((a,i)=>{const e=`${n}/v2/api/${c}/coupon`,s={data:{code:t}};r.post(e,s).then(o=>{a(o)}).catch(o=>{i(o)})})}}});export{m as c};
