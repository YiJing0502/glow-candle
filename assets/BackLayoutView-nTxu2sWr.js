import{E as R,G as v,m as $,a as h,_ as A,o as d,c as _,b as t,e as o,f as r,n as l,g as u,F as w,h as i,p as T,i as L,j as V,l as C}from"./index-b5Mq9qPg.js";import{t as I}from"./toastsStore-4YbyuFGs.js";import{p as S}from"./pageStore-wvBwuoI_.js";import{T as B}from"./ToastMessages-35wi3mKK.js";var N={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:b}=N,M=R("adminStore",{state:()=>({loginSuccess:null}),getters:{},actions:{initializeAdmin(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)adminAccount\s*\=\s*([^;]*).*$)|^.*$/,"$1");v.defaults.headers.common.Authorization=e},postApiUserCheck(){const e=`${b}/v2/api/user/check`;return v.post(e).then(s=>(this.loginSuccess=s.data.success,s)).catch(s=>{throw this.loginSuccess=s.response.data.success,s})}}});var U={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:y}=U,D={data(){return{serverMessage:{message:"",success:!0}}},computed:{...$(S,["nowPage"])},methods:{adminLogout(){const e=`${y}/v2/logout`;this.$http.post(e).then(s=>{const c=new Date;c.setSeconds(c.getSeconds()-1),document.cookie=`adminAccount=; expires=${c.toUTCString()}`,this.$router.push({name:"login"}),this.serverMessage.message=s.data.message,this.serverMessage.success=s.data.success,this.$refs.resultModal.openModal()}).catch(s=>{this.serverMessage.message=s.response.data.message,this.serverMessage.success=s.response.data.success,this.$refs.resultModal.openModal()})},...h(S,["changeNowPage"])}},f=e=>(T("data-v-4c6cf72e"),e=e(),L(),e),x={class:"col-2 bg-main-medium side-bar-height px-3"},z={class:"d-flex justify-content-center my-3"},O=f(()=>t("img",{src:V,alt:"",width:"70"},null,-1)),j={class:"list-group"},F={class:"list-group-item"},H={class:"list-group-item"},G={class:"list-group-item"},q={class:"list-group-item"},J={class:"m-3 d-flex justify-content-center align-items-center"},K=f(()=>t("span",{class:"material-icons"},"logout",-1)),Q=f(()=>t("span",null,"登出",-1)),W=[K,Q];function X(e,s,c,k,m,g){const n=i("RouterLink"),p=i("ResultModal");return d(),_(w,null,[t("div",x,[t("div",z,[o(n,{class:l({active:e.nowPage==="首頁"}),onClick:s[0]||(s[0]=a=>e.changeNowPage("首頁")),to:{name:"home"}},{default:r(()=>[O]),_:1},8,["class"])]),t("ul",j,[t("li",F,[o(n,{class:l(["list-group-item",{active:e.nowPage==="訂單管理"}]),onClick:s[1]||(s[1]=a=>e.changeNowPage("訂單管理")),to:{name:"adminOrders"}},{default:r(()=>[u("訂單管理")]),_:1},8,["class"])]),t("li",H,[o(n,{class:l(["list-group-item",{active:e.nowPage==="產品管理"}]),onClick:s[2]||(s[2]=a=>e.changeNowPage("產品管理")),to:{name:"adminProducts"}},{default:r(()=>[u("產品管理")]),_:1},8,["class"])]),t("li",G,[o(n,{class:l(["list-group-item",{active:e.nowPage==="優惠券管理"}]),onClick:s[3]||(s[3]=a=>e.changeNowPage("優惠券管理")),to:{name:"adminCoupons"}},{default:r(()=>[u("優惠券管理")]),_:1},8,["class"])]),t("li",q,[o(n,{class:l(["list-group-item",{active:e.nowPage==="文章管理"}]),onClick:s[4]||(s[4]=a=>e.changeNowPage("文章管理")),to:{name:"adminArticles"}},{default:r(()=>[u("文章管理")]),_:1},8,["class"])])]),t("div",J,[t("button",{type:"button",class:"btn btn-outline-spec d-flex justify-content-center align-items-center",onClick:s[5]||(s[5]=(...a)=>g.adminLogout&&g.adminLogout(...a))},W)])]),o(p,{ref:"resultModal","server-message":m.serverMessage},null,8,["server-message"])],64)}const Y=A(D,[["render",X],["__scopeId","data-v-4c6cf72e"]]),Z={data(){return{serverMessage:{message:"",success:!0}}},components:{AdminNavbar:Y,ToastMessages:B},computed:{...$(M,["loginSuccess"])},methods:{...h(I,["pushToast"]),...h(M,["initializeAdmin","postApiUserCheck"])},mounted(){this.initializeAdmin(),this.postApiUserCheck().then(()=>{this.loginSuccess&&this.pushToast({title:"登入成功",style:"bg-deep-gray"})}).catch(e=>{this.loginSuccess||(this.$router.push({name:"login"}),this.serverMessage.message=e.response.data.message,this.serverMessage.success=e.response.data.success,this.$refs.resultModal.openModal())})}},ee={key:1,class:"d-flex"};function se(e,s,c,k,m,g){const n=i("PageLoading"),p=i("ToastMessages"),a=i("AdminNavbar"),P=i("RouterView"),E=i("ResultModal");return d(),_(w,null,[e.loginSuccess?(d(),_("div",ee,[o(p),o(a),o(P)])):(d(),C(n,{key:0})),o(E,{ref:"resultModal","server-message":m.serverMessage},null,8,["server-message"])],64)}const ie=A(Z,[["render",se]]);export{ie as default};
