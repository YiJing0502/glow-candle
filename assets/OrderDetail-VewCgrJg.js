import{_,i as m,m as b,f,c as n,a as s,t as e,F as i,j as d,e as c,r as g,o as a,d as r}from"./index-zAkwafHT.js";import{o as u}from"./ordersStore-ao68uyTD.js";import"./stringStore-bgGk0xh6.js";import"./timeStore-gYZ6hjGk.js";const v={data(){return{useCoupon:!1,couponCode:"",checkOrderInfo:!1,orderData:{data:{user:{name:null,email:null,tel:null,address:null},message:null}}}},methods:{async goToGetOrder(){try{const t=await this.getOrder(this.$route.params.id);t.data.order===null&&this.$router.push({name:"front404",params:{pathMatch:this.$route.path.split("/").slice(1)},query:this.$route.query,hash:this.$route.hash}),t.data.order.is_paid||(this.serverMessage.message="訂單已建立，請點擊付款按鈕付款",this.serverMessage.success=t.data.success,this.$refs.resultModal.openModal())}catch(t){this.serverMessage.message=t.response.data.message,this.serverMessage.success=t.response.data.success,this.$refs.resultModal.openModal()}},...m(u,["getOrder","postPayOrder"])},computed:{...b(u,["isLoading","showData","userData","productData","couponData"])},mounted(){this.goToGetOrder()}},y={key:1,class:"container bg-main-medium rounded-10em mt-5 mb-5 px-5r py-7r"},D={class:"d-flex align-items-center justify-content-center mb-3"},w={class:"text-center border-bottom border-secondary pb-2 w-50"},S={class:"row"},$={class:"col"},C={class:"accordion",id:"accordionPanelsStayOpenExample"},O={class:"accordion-item"},k=s("h2",{class:"accordion-header",id:"ShoppingCartSection"},[s("button",{class:"accordion-button fs-5 fw-semibold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#ShoppingCartDetails","aria-expanded":"true","aria-controls":"ShoppingCartDetails"}," 購物車 ")],-1),I={id:"ShoppingCartDetails",class:"accordion-collapse collapse show","aria-labelledby":"ShoppingCartSection"},M={class:"accordion-body"},j={class:"col-3 d-flex align-items-center"},N=["src","alt"],T={class:"col-9"},B={class:"d-flex"},E={key:0},L={class:"accordion-item"},x=s("h2",{class:"accordion-header",id:"OrderConfirmationSection"},[s("button",{class:"accordion-button fs-5 fw-semibold collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#OrderConfirmationDetails","aria-expanded":"false","aria-controls":"OrderConfirmationDetails"}," 訂單確認 ")],-1),R={id:"OrderConfirmationDetails",class:"accordion-collapse collapse show","aria-labelledby":"OrderConfirmationSection"},V={class:"accordion-body"},P={class:"d-flex justify-content-between"},q=s("p",null,"訂單建立日",-1),A={class:"d-flex justify-content-between"},F=s("p",null,"訂單付款日期",-1),G=s("div",{class:"d-flex justify-content-between"},[s("p",null,"運費"),s("p",null,"免運費")],-1),U={key:0,class:"d-flex justify-content-between"},z=s("p",null,"使用優惠券",-1),H=s("hr",null,null,-1),J={class:"d-flex justify-content-between mb-3"},K=s("p",null,"總付款金額",-1),Q={class:"text-end"},W={key:1,class:"d-flex mb-3"},X={key:2,class:"d-flex mb-3"},Y=s("button",{type:"button",class:"btn btn-solid-dpgray w-100 btn-lg",disabled:""}," 已完成付款 ",-1),Z=[Y],ss={class:"col"},ts={class:"accordion",id:"accordionPanelsStayOpenExample"},es={class:"accordion-item"},os=s("h2",{class:"accordion-header",id:"RecipientInformationSection"},[s("button",{class:"accordion-button fs-5 fw-semibold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#RecipientInformationDetails","aria-expanded":"true","aria-controls":"RecipientInformationDetails"}," 收件資料 ")],-1),as={id:"RecipientInformationDetails",class:"accordion-collapse collapse show","aria-labelledby":"RecipientInformationSection"},ns={class:"accordion-body"},ls=s("p",null,"收件人名稱",-1),is=s("hr",null,null,-1),ds=s("p",null,"電子信箱",-1),cs=s("hr",null,null,-1),rs=s("p",null,"行動電話號碼",-1),us=s("hr",null,null,-1),ps=s("p",null,"收件地址",-1),hs=s("hr",null,null,-1),_s={class:"mb-3"},ms=s("p",null,"訂單備註",-1),bs=s("br",null,null,-1);function fs(t,l,gs,vs,ys,Ds){const p=g("VueLoading");return t.isLoading?(a(),f(p,{key:0,active:t.isLoading,"background-color":"#EBEAE4","is-full-page":!0,color:"#52504B"},null,8,["active"])):(a(),n("div",y,[s("div",D,[s("h2",w,"訂單編號："+e(t.showData.id),1)]),s("div",S,[s("div",$,[s("div",C,[s("div",O,[k,s("div",I,[s("div",M,[(a(!0),n(i,null,d(t.productData,o=>(a(),n("div",{class:"row mb-3",key:o.id},[s("div",j,[s("img",{src:o.product.imageUrl,alt:o.product.title,class:"img-fluid"},null,8,N)]),s("div",T,[s("div",B,[s("h6",null,e(o.product.title),1)]),s("p",null,[r("單價NT$ "+e(parseInt(o.product.price))+" / 小計NT$ "+e(parseInt(o.total))+" ",1),o.final_total!==o.total?(a(),n("span",E," / 優惠價NT$ "+e(parseInt(o.final_total)),1)):c("",!0)]),s("p",null,"數量："+e(o.qty),1)])]))),128))])])]),s("div",L,[x,s("div",R,[s("div",V,[s("div",P,[q,s("p",null,e(t.showData.create_at),1)]),s("div",A,[F,s("p",null,e(t.showData.paid_date),1)]),G,t.couponData?(a(),n("div",U,[z,s("p",null,"已使用"+e(t.couponData.title)+"優惠券",1)])):c("",!0),H,s("div",J,[K,s("h4",Q,"NT$ "+e(parseInt(t.showData.total)),1)]),t.showData.is_paid?(a(),n("div",X,Z)):(a(),n("div",W,[s("button",{type:"button",class:"btn btn-solid-spec w-100 btn-lg",onClick:l[0]||(l[0]=o=>t.postPayOrder(t.showData.id))},"點我付款")]))])])])])]),s("div",ss,[s("div",ts,[s("div",es,[os,s("div",as,[s("div",ns,[s("div",null,[ls,s("p",null,e(t.userData.name),1)]),is,s("div",null,[ds,s("p",null,e(t.userData.email),1)]),cs,s("div",null,[rs,s("p",null,e(t.userData.tel),1)]),us,s("div",null,[ps,s("p",null,e(t.userData.address),1)]),hs,s("div",_s,[ms,s("p",null,[(a(!0),n(i,null,d(t.showData.message,(o,h)=>(a(),n("span",{key:h},[r(e(o),1),bs]))),128))])])])])])])])])]))}const Os=_(v,[["render",fs]]);export{Os as default};
