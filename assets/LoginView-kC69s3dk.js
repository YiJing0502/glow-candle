import{_ as m,c as p,b as s,J as u,w as l,v as d,e as h,F as _,j as f,h as g,o as v}from"./index-b5Mq9qPg.js";var b={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:w}=b,x={data(){return{email:"",password:"",serverMessage:{message:"",success:!0}}},methods:{postAdminSignin(){if(this.email===""&&this.password===""){this.serverMessage.message="信箱與密碼是必須的",this.serverMessage.success=!1,this.$refs.resultModal.openModal();return}const a={username:this.email,password:this.password};this.$http.post(`${w}/v2/admin/signin`,a).then(e=>{if(e.data.success){const{expired:r,token:n}=e.data;document.cookie=`adminAccount=${n}; expires=${new Date(r)}`,this.email="",this.password="",this.$router.push({name:"adminOrders"})}}).catch(e=>{this.serverMessage.message=e.response.data.message,this.serverMessage.success=e.response.data.success,this.$refs.resultModal.openModal()})}},mounted(){}},M={class:"container d-flex justify-content-center align-items-center vh-100 back"},y={class:"col-8"},A=s("div",{class:"d-flex justify-content-center mb-2"},[s("img",{src:f,alt:"",class:"img-fluid",width:"100"})],-1),E=s("h3",{class:"mb-3 text-center text-deep-gray"},"請先登入",-1),S={class:"form-floating mb-3"},V=s("label",{for:"username",class:"text-deep-gray"}," 輸入您的電子郵件 ",-1),R={class:"form-floating mb-3"},B=s("label",{for:"password",class:"text-deep-gray"}," 輸入您的密碼 ",-1),k=s("div",{class:"d-flex"},[s("button",{type:"button",class:"btn btn-lg btn-solid-dpgray w-100 mt-3"},"回首頁"),s("button",{class:"btn btn-lg w-100 mt-3 btn-solid-spec",type:"submit"},"登入")],-1);function D(a,e,r,n,t,i){const c=g("ResultModal");return v(),p(_,null,[s("div",M,[s("div",y,[A,E,s("form",{id:"form",class:"form-signin",onSubmit:e[2]||(e[2]=u((...o)=>i.postAdminSignin&&i.postAdminSignin(...o),["prevent"]))},[s("div",S,[l(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.email=o),type:"email",class:"form-control text-deep-gray",id:"username",placeholder:"name@example.com",required:"",autofocus:""},null,512),[[d,t.email]]),V]),s("div",R,[l(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.password=o),type:"password",class:"form-control text-deep-gray",id:"password",placeholder:"password",required:""},null,512),[[d,t.password]]),B]),k],32)])]),h(c,{ref:"resultModal","server-message":t.serverMessage},null,8,["server-message"])],64)}const U=m(x,[["render",D]]);export{U as default};
