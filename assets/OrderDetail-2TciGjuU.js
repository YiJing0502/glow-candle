import{_ as w,a as u,m as v,c as a,q as D,b as t,f as p,g as d,i as k,h as g,o as n,e as l,F as m,r as f,t as o,d as h}from"./index-vSMGsHVG.js";import{o as b}from"./ordersStore-O30sE3QA.js";import{p as C}from"./pageStore-jPQB3cvG.js";import{B as $}from"./BasicCollapse-SNN3S7y7.js";import"./stringStore-mamKbLwN.js";import"./timeStore-5fwm0uwE.js";const P={data(){return{useCoupon:!1,couponCode:"",checkOrderInfo:!1,orderData:{data:{user:{name:null,email:null,tel:null,address:null},message:null}}}},components:{BasicCollapse:$},methods:{changeToProductPage(e,r){this.changeNowPage(r),this.$router.push({name:"product",params:{id:e}})},async goToGetOrder(){try{const e=await this.getOrder(this.$route.params.id);e.data.order===null&&(this.$router.push({name:"front404",params:{pathMatch:this.$route.path.split("/").slice(1)},query:this.$route.query,hash:this.$route.hash}),this.showAlertMessage(!1,"找不到此筆訂單")),e.data.order.is_paid||this.showAlertMessage(!0,"訂單已建立，請點擊付款按鈕付款")}catch(e){this.showAlertMessage(!1,e.response.data.message)}},...u(b,["getOrder","postPayOrder"]),...u(k,["showAlertMessage"]),...u(C,["changeNowPage"])},computed:{...v(b,["isLoading","showData","userData","productData","couponData"])},mounted(){this.goToGetOrder()}},N={key:1,class:"container bg-main-medium container-rounded my-5 py-7r px-lg-5 px-md-4 px-sm-3"},T=t("div",{class:"d-flex align-items-center justify-content-center mb-3"},[t("h2",{class:"text-center border-secondary pb-2 fw-bold"},"訂單詳情")],-1),I={class:"row row-cols-1 row-cols-lg-2"},O={class:"col"},S={class:"accordion"},B={class:"col col-sm-2 col-lg-3 d-flex align-items-center"},j=["onClick","src","alt"],q={class:"col col-sm-10 col-lg-9"},x={class:"d-flex"},A=["onClick"],L={key:0},M={class:"fw-bold"},V={class:"d-flex justify-content-between"},F=t("p",null,"訂單編號",-1),G={class:"d-flex justify-content-between"},E=t("p",null,"訂單建立日",-1),R={class:"d-flex justify-content-between"},U=t("p",null,"訂單付款日期",-1),z=t("div",{class:"d-flex justify-content-between"},[t("p",null,"運費"),t("p",null,"免運費")],-1),H={key:0,class:"d-flex justify-content-between"},J=t("p",null,"使用優惠券",-1),K={class:"fw-bold"},Q=t("hr",null,null,-1),W={class:"d-flex justify-content-between mb-3"},X=t("p",null,"總付款金額",-1),Y={class:"text-end"},Z={key:1,class:"d-flex mb-3"},tt={key:2,class:"d-flex mb-3"},et=t("button",{type:"button",class:"btn btn-solid-dpgray w-100 btn-lg border",disabled:""}," 已完成付款 ",-1),st=[et],ot={class:"col"},nt={class:"accordion"},at=t("p",null,"收件人名稱",-1),lt=t("hr",null,null,-1),dt=t("p",null,"電子信箱",-1),rt=t("hr",null,null,-1),it=t("p",null,"行動電話號碼",-1),ct=t("hr",null,null,-1),ut=t("p",null,"收件地址",-1),pt=t("hr",null,null,-1),ht={class:"mb-3"},_t=t("p",null,"訂單備註",-1),gt={key:0},mt=t("br",null,null,-1);function ft(e,r,bt,yt,wt,_){const y=g("PageLoading"),i=g("BasicCollapse");return n(),a("div",null,[e.isLoading?(n(),D(y,{key:0})):(n(),a("div",N,[T,t("div",I,[t("div",O,[t("div",S,[p(i,{uniqueId:"ShoppingCartSection",open:!0},{header:d(()=>[l(" 購物車 ")]),body:d(()=>[(n(!0),a(m,null,f(e.productData,s=>(n(),a("div",{class:"row mb-3",key:s.id},[t("div",B,[t("img",{role:"button",onClick:c=>_.changeToProductPage(s.product.id,s.product.category),src:s.product.imageUrl,alt:s.product.title,class:"img-fluid"},null,8,j)]),t("div",q,[t("div",x,[t("h6",{class:"text-link-deep-gray",role:"button",onClick:c=>_.changeToProductPage(s.product.id,s.product.category)},o(s.product.title),9,A)]),t("p",null,[l(" 單價NT$ "+o(parseInt(s.product.price))+" / 小計NT$ "+o(parseInt(s.total))+" ",1),s.final_total!==s.total?(n(),a("span",L," / 優惠價NT$ "+o(parseInt(s.final_total)),1)):h("",!0)]),t("p",null,[l(" 數量： "),t("span",M,o(s.qty),1)])])]))),128))]),_:1}),p(i,{uniqueId:"OrderConfirmationSection",open:!0},{header:d(()=>[l(" 訂單確認 ")]),body:d(()=>[t("div",V,[F,t("p",null,o(e.showData.id),1)]),t("div",G,[E,t("p",null,o(e.showData.create_at),1)]),t("div",R,[U,t("p",null,o(e.showData.paid_date),1)]),z,e.couponData?(n(),a("div",H,[J,t("p",null,[l(" 已使用 "),t("span",K,o(e.couponData.title),1),l(" 優惠券 ")])])):h("",!0),Q,t("div",W,[X,t("h4",Y,"NT$ "+o(parseInt(e.showData.total)),1)]),e.showData.is_paid?(n(),a("div",tt,st)):(n(),a("div",Z,[t("button",{type:"button",class:"btn btn-solid-spec w-100 btn-lg",onClick:r[0]||(r[0]=s=>e.postPayOrder(e.showData.id))}," 點我付款 ")]))]),_:1})])]),t("div",ot,[t("div",nt,[p(i,{uniqueId:"RecipientInformationSection",open:!0},{header:d(()=>[l(" 收件資料 ")]),body:d(()=>[t("div",null,[at,t("p",null,o(e.userData.name),1)]),lt,t("div",null,[dt,t("p",null,o(e.userData.email),1)]),rt,t("div",null,[it,t("p",null,o(e.userData.tel),1)]),ct,t("div",null,[ut,t("p",null,o(e.userData.address),1)]),pt,t("div",ht,[_t,t("p",null,[e.showData.message===void 0?(n(),a("span",gt,"無")):h("",!0),(n(!0),a(m,null,f(e.showData.message,(s,c)=>(n(),a("span",{key:c},[l(o(s),1),mt]))),128))])])]),_:1})])])])]))])}const Nt=w(P,[["render",ft]]);export{Nt as default};
