import{J as T,K as h,m as S,a as d,_ as A,i as v,o as p,c as w,b as t,f as a,g as c,n as l,e as u,h as r,p as L,j as R,k as V,O as C,q as I,I as b}from"./index-vSMGsHVG.js";import{p as _}from"./pageStore-jPQB3cvG.js";var B={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:N}=B,f=T("adminStore",{state:()=>({loginSuccess:null}),getters:{},actions:{initializeAdmin(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)adminAccount\s*\=\s*([^;]*).*$)|^.*$/,"$1");h.defaults.headers.common.Authorization=e},postApiUserCheck(){const e=`${N}/v2/api/user/check`;return h.post(e).then(s=>(this.loginSuccess=s.data.success,s)).catch(s=>{throw this.loginSuccess=s.response.data.success,s})}}});var U={VITE_BASE_URL:"https://vue3-course-api.hexschool.io",VITE_API_PATH:"orli-hexschool",BASE_URL:"/glow-candle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_BASE_URL:y}=U,M={data(){return{}},computed:{...S(_,["nowPage"])},methods:{adminLogout(){const e=`${y}/v2/logout`;this.$http.post(e).then(s=>{const i=new Date;i.setSeconds(i.getSeconds()-1),document.cookie=`adminAccount=; expires=${i.toUTCString()}`,this.$router.push({name:"login"}),this.showAlertMessage(!0,s.data.message)}).catch(s=>{this.showAlertMessage(!1,s.response.data.message)})},...d(_,["changeNowPage"]),...d(v,["showAlertMessage"])}},g=e=>(L("data-v-08d1cfb3"),e=e(),R(),e),D={class:"col-2 bg-main-medium side-bar-height px-3"},x={class:"d-flex justify-content-center my-3"},O=g(()=>t("img",{src:V,alt:"",width:"70"},null,-1)),z={class:"list-group"},j={class:"list-group-item"},H={class:"list-group-item"},q={class:"list-group-item"},J={class:"list-group-item"},K={class:"m-3 d-flex justify-content-center align-items-center"},F=g(()=>t("span",{class:"material-icons"},"logout",-1)),G=g(()=>t("span",null,"登出",-1)),Q=[F,G];function W(e,s,i,$,k,m){const n=r("RouterLink");return p(),w("div",D,[t("div",x,[a(n,{class:l({active:e.nowPage==="首頁"}),onClick:s[0]||(s[0]=o=>e.changeNowPage("首頁")),to:{name:"home"}},{default:c(()=>[O]),_:1},8,["class"])]),t("ul",z,[t("li",j,[a(n,{class:l(["list-group-item",{active:e.nowPage==="訂單管理"}]),onClick:s[1]||(s[1]=o=>e.changeNowPage("訂單管理")),to:{name:"adminOrders"}},{default:c(()=>[u("訂單管理")]),_:1},8,["class"])]),t("li",H,[a(n,{class:l(["list-group-item",{active:e.nowPage==="產品管理"}]),onClick:s[2]||(s[2]=o=>e.changeNowPage("產品管理")),to:{name:"adminProducts"}},{default:c(()=>[u("產品管理")]),_:1},8,["class"])]),t("li",q,[a(n,{class:l(["list-group-item",{active:e.nowPage==="優惠券管理"}]),onClick:s[3]||(s[3]=o=>e.changeNowPage("優惠券管理")),to:{name:"adminCoupons"}},{default:c(()=>[u("優惠券管理")]),_:1},8,["class"])]),t("li",J,[a(n,{class:l(["list-group-item",{active:e.nowPage==="文章管理"}]),onClick:s[4]||(s[4]=o=>e.changeNowPage("文章管理")),to:{name:"adminArticles"}},{default:c(()=>[u("文章管理")]),_:1},8,["class"])])]),t("div",K,[t("button",{type:"button",class:"btn btn-outline-spec d-flex justify-content-center align-items-center",onClick:s[5]||(s[5]=(...o)=>m.adminLogout&&m.adminLogout(...o))},Q)])])}const X=A(M,[["render",W],["__scopeId","data-v-08d1cfb3"]]),Y={data(){return{}},components:{AdminNavbar:X,ToastMessages:C},computed:{...S(f,["loginSuccess"])},methods:{...d(b,["pushToast"]),...d(f,["initializeAdmin","postApiUserCheck"]),...d(v,["showAlertMessage"])},mounted(){this.initializeAdmin(),this.postApiUserCheck().then(()=>{this.loginSuccess&&this.pushToast({title:"登入成功",style:"bg-deep-gray"})}).catch(e=>{this.loginSuccess||(this.$router.push({name:"login"}),this.showAlertMessage(!1,e.response.data.message))})}},Z={key:1,class:"d-flex"};function ee(e,s,i,$,k,m){const n=r("PageLoading"),o=r("ToastMessages"),P=r("AdminNavbar"),E=r("RouterView");return e.loginSuccess?(p(),w("div",Z,[a(o),a(P),a(E)])):(p(),I(n,{key:0}))}const oe=A(Y,[["render",ee]]);export{oe as default};
